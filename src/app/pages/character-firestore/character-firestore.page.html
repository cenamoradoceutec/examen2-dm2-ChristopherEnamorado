<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Characters (Alive • Male)</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <ion-list *ngIf="characters$ | async as items; else loading">
    <ion-item *ngFor="let ch of items" lines="inset" class="character-item">
      <ion-avatar slot="start">
        <!-- Fallback si no hay imagen -->
        <img *ngIf="ch.image; else noimg" [src]="ch.image" alt="{{ch.name}}" />
        <ng-template #noimg>
          <img src="https://via.placeholder.com/80x80.png?text=?" alt="no image" />
        </ng-template>
      </ion-avatar>

      <ion-label>
        <h2>{{ ch.name }}</h2>
        <div class="chips">
          <ion-chip color="success">{{ ch.Status }}</ion-chip>
          <ion-chip>{{ ch.Gender }}</ion-chip>
          <ion-chip *ngIf="ch.species">{{ ch.species }}</ion-chip>
        </div>
        <p class="created">Creado: {{ toDate(ch.created) | date:'medium' }}</p>
      </ion-label>
    </ion-item>

    <ion-item *ngIf="items.length === 0">
      <ion-label><ion-text>No hay resultados que cumplan el filtro.</ion-text></ion-label>
    </ion-item>
  </ion-list>

  <ng-template #loading>
    <ion-text>Cargando personajes…</ion-text>
  </ng-template>

</ion-content>
